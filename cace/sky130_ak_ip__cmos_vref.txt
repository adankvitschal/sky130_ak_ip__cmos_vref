#--------------------------------------------------------------
# CACE circuit characterization file
#--------------------------------------------------------------

name:			sky130_ak_ip__cmos_vref
description:	All-CMOS voltage reference based on the NFET threshold voltage
commit:			N/A
PDK:			sky130A

cace_format:	4.0

authorship {
	designer:	Adan Kvitschal
	company:	ModuHub Tecnologia LTDA
	creation_date:	March 8, 2024
	license:	Apache 2.0
}

# Paths to various files

paths {
	root:		..
	documentation:	doc
	schematic:	xschem
	magic:		mag
	layout:		gds
	netlist:	netlist
	testbench:	cace
	simulation:	ngspice
	reports:	reports
	plots:		plots
	logs:		ngspice/log
}

# Project dependencies

dependencies {
}

# Pin names and descriptions

pins {
	name:		vref
	description:	Reference Voltage Output
	type:		analog
	direction:	output
	Vmin:		avss - 0.3
	Vmax:		avdd + 0.3

	+
	name:		vx
	description:	PTAT Voltage Output
	type:		analog
	direction:	output
	Vmin:		avss - 0.3
	Vmax:		avdd + 0.3

	+
	name:		avdd
	description:	Positive analog power supply
	type:		power
	direction:	inout
	Vmin:		1.5
	Vmax:		2.1

	+
	name:		dvdd
	description:	Positive digital power supply
	type:		power
	direction:	inout
	Vmin:		1.5
	Vmax:		2.1

 	+
	name:		avss
	description:	Analog ground
	type:		ground
	direction:	inout
	Vmin:		-0.3
	Vmax:		0.3

	+
	name:		dvss
	description:	Digital ground
	type:		ground
	direction:	inout
	Vmin:		-0.3
	Vmax:		0.3

	+
	name:		trim0
	description:	Trim bit 0
	type:		digital
	direction:	input
	Vmin:		dgnd-0.3
	Vmax:		dvdd+0.3

	+
	name:		trim1
	description:	Trim bit 1
	type:		digital
	direction:	input
	Vmin:		dgnd-0.3
	Vmax:		dvdd+0.3

	+
	name:		trim2
	description:	Trim bit 2
	type:		digital
	direction:	input
	Vmin:		dgnd-0.3
	Vmax:		dvdd+0.3

	+
	name:		trim3
	description:	Trim bit 3
	type:		digital
	direction:	input
	Vmin:		dgnd-0.3
	Vmax:		dvdd+0.3
}

# Default values for electrical parameter measurement conditions
# if not otherwise specified

default_conditions {
	name:		Rout
	description:	Output load resistance
	display:	RLoad
	unit:		M{ohms}
	typical:	100

	+
	name:		temperature
	description:	Ambient temperature
	display:	Temp
	unit:		{degrees}C
	minimum:	-40
	typical:	27
	maximum:	130

	+
	name:		corner
	description:	Process corner
	display:	Corner
	minimum:	ss
	typical:	tt
	maximum:	ff

	+
	name:		iterations
	description:	Iterations to run
	display:	Iterations
	minimum:	1
	maximum:	10
	step:		linear
	stepsize:	1
}

# List of electrical parameters to be measured and their specified limits

electrical_parameters {
	name:		Idd_enabled
	status:		skip
	description:	Current draw through analog supply, circuit enabled
	display:	Idd
	unit: 		{micro}A
	spec {
		minimum:	any
		typical:	2
		maximum:	5	fail
	}
	simulate {
		tool:		ngspice
		template:	tb_power.spice
		format:		ascii .data null result
	}
	conditions {
		name: Vdvdd
		typical: 1.8

		+
		name: Vavdd
		min: 1.62
		max: 1.98
		typical: 1.8

		+
		name: temperature
		min: -40
		max: 85
		typical: 27

		+
		name: corner
		typical: tt
	}

	+
	name:			Idd_disabled
	status:			skip
	description:	Current draw through analog supply, circuit disabled
	display:		Standby current
	unit:			{micro}A
	spec {
		minimum:	any
		typical:	2
		maximum:	5	fail
	}
	simulate {
		tool:		ngspice
		template:	tb_power.spice
		format:		ascii .data null result
	}
	conditions {
		name: Vdvdd
		typical: 1.8

		+
		name: Vavdd
		min: 1.62
		max: 1.98
		typical: 1.8

		+
		name: temperature
		min: -40
		max: 85
		typical: 27

		+
		name: corner
		typical: tt
	}

	+
	name:		psrr_1k
	status:		skip
	description:	PSRR @ 1kHz
	display:	PSRR @ 1kHz
	unit:		dB
	spec {
		maximum:	any
		typical:	70
		minimum:	60 fail
	}
	simulate {
		tool:		ngspice
		template:	tb_psrr.spice
		format:		ascii .data result
	}
	conditions {
		name: Vavdd
		typical: 1.8

		+
		name: Vdvdd
		typical: 1.8

		+
		name: temperature
		maximum: 85
		typical: 27
		minimum: -40

		+
		name: frequency
		unit: Hz
		typical: 1k
		note: Center frequency for the PSRR simulation

		+
		name: corner
		minimum: ss
		typical: tt
		maximum: ff
	}

}

# List of physical parameters to be measured and their specified limits

physical_parameters {
	name:		area
	status:		skip
	description:	Total circuit layout area
	display:	area
	unit: 		{micro}m{squared}
	spec {
		maximum:	50000	fail
	}
	evaluate {
		tool:		cace_area
	}

	+
	name:		LVS_errors
	description:	LVS errors
	display:	LVS errors
	spec {
		maximum:	0	fail
	}
	evaluate {
		tool:		cace_lvs run_project_lvs.tcl
	}

	+
	name:		DRC_errors
	status:		skip
	description:	DRC errors
	display:	DRC errors
	spec {
		maximum:	0	fail
	}
	evaluate {
		tool:		cace_drc
	}
}